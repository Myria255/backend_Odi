<!-- Conteneur principal de la page avec défilement vertical -->

<page_couverture></page_couverture>
<scroll-view class="integrer" scroll-y="true" show-scrollbar="false">
    <!-- Premier conteneur pour le bouton et la description -->
    <view class="conteneur_premier" >
        <view class="bouton" bindtap="openModal">Intégrer</view>
        <view class="description">Description</view>  
        <view class="description_text {{isExpanded ? 'expanded' : 'collapsed'}}">
            <text>Ma Tontine est une application mobile qui permet de créer, gérer et suivre facilement des tontines numériques. Elle offre aux utilisateurs la possibilité de participer à des tontines avec ou sans assurance, d’automatiser le suivi des cotisations et des paiements, et de recevoir des notifications pour ne jamais manquer un versement.
            
                Pour les tontines avec assurance, l’application gère le paiement des garanties et assure la sécurité des fonds. Les tontines sans assurance appliquent automatiquement des frais de 2,5 % sur chaque cotisation. Chaque participant reste responsable de ses paiements, et toute tentative de fraude est suivie légalement.
            
                Grâce à Ma Tontine, la gestion de l’épargne collective devient simple, sécurisée et transparente, directement depuis votre smartphone via Orange Money. </text>
        </view>
        <view class="voir_plus" bindtap="toggleText" style="position: relative; top: 30rpx; left: 0;">
            {{isExpanded ? 'Voir moins' : 'Voir plus...'}}
        </view>
    </view>

    <!-- Second conteneur pour les avis utilisateurs -->
    <view class="conteneur_second">
        <view class="Avis">Note & Avis d'utilisateurs</view>
        <view class="Avis_view avis-{{index}}" wx:for="{{avisList}}" wx:key="id">
            <view class="ensemble">
                <image src="{{item.avatar}}" class="avatar" />
                <view class="noteNom">
                    <view class="nom">{{item.nom}}</view>
                    <view class="note">{{item.note}}</view>
                </view>
            </view>
            <view class="description_avis">
                <text class="{{item.expanded ? 'full-text' : 'truncated-text'}}">{{item.description}}</text>
                <view class="voir_plus_avis" wx:if="{{item.showButton}}" bindtap="toggleExpand" data-index="{{index}}">
                    {{item.expanded ? 'Voir moins' : 'Voir plus...'}}
                </view>
            </view>
        </view>
    </view>

    <!-- Modal pour l'intégration (style non modifié) -->
    <view wx:if="{{showModal}}" class="modal-overlay" bindtap="closeModal">
        <view class="modal-container1" catchtap="preventClose">
            <view class="modal-header1">
                <view class="modal-title-container1">
                    <text class="modal-title1">Entrer le mot de passe</text>
                </view>
                <view class="close-button" bindtap="closeModal">
                    <image src="../../images/mingcute_close-fill.png" class="close-icon" />
                </view>
            </view>
            <scroll-view scroll-y="true" class="modal-scroll1" enhanced="true">
                <view class="modal-body1">
                    <view class="input-group1">
                        <text class="input-label">Numéro de téléphone</text>
                        <view class="phone-input-container">
                            <input type="number" placeholder="Entrez votre numéro" class="phone-input" bindinput="onPhoneNumberInput" value="{{numeroTelephone}}" maxlength="14" />
                        </view>
                        <text class="input-label">Code OTP</text>
                        <view class="otp-container">
                            <input type="number" class="otp-input" placeholder="Entrez le code OTP" bindinput="onOtpInput" value="{{otp}}" maxlength="6" focus="{{true}}" />
                            <view class="otp-boxes">
                                <view class="otp-box" wx:for="{{6}}" wx:key="index">
                                    <text class="otp-digit">{{otp.length >= index + 1 ? otp[index] : ''}}</text>
                                </view>
                            </view>
                        </view>
                    </view>
                    <view class="modal-footer">
                        <view class="confirm-button" bindtap="verifyOtp">
                            Valider
                        </view>
                    </view>
                </view>
            </scroll-view>
        </view>
    </view>
</scroll-view>